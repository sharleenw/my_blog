---
title: 'Hamilton Christmas Bird Count: Part 2'
subtitle: 'Visualising the Hamilton CBC data'
author: Sharleen
date: '2019-01-24'
slug: hamilton-christmas-bird-count-part-2
summary: Visualising the Hamilton CBC data.
categories: []
tags:
  - data analysis
  - R
  - natural history
  - ornithology
  - ecology
  - birding
  - ggplot2
  - tidyverse
draft: true
image:
  caption: 'Northern Cardinal image credit: [**Public Domain Files**](http://www.publicdomainfiles.com/show_file.php?id=13962429013391)'
  preview_only: false

---



<div id="note" class="section level1">
<h1>Note</h1>
<p>This is the second part of three for this dataset. Part 1 contains data downloading and cleaning, Part 2 contains visualisations and Part 3 contains my Shiny app!</p>
</div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In Part 1 of this data analysis project gave us a</p>
</div>
<div id="data-visualising" class="section level1">
<h1>Data visualising</h1>
<p>I started by loading all of the packages I will be using:</p>
<pre class="r"><code>library(dplyr)
library(janitor)
library(readr)
library(naniar)
library(lubridate)
library(measurements)
library(stringr)
library(ggplot2)
library(here)</code></pre>
<pre><code>## Warning: package &#39;here&#39; was built under R version 3.5.2</code></pre>
<pre class="r"><code>library(tidyr)</code></pre>
</div>
<div id="data-visualizing" class="section level1">
<h1>Data visualizing</h1>
<p>The book</p>
<p>In 1955, the count boundaries changed.</p>
<pre class="r"><code># This person went out for 8 hours in 1921 and saw 9 different species, including a grey jay!
hamilton_cbc %&gt;%
  filter(year == 1921,
         !is.na(how_many_counted)) %&gt;%
  select(species, how_many_counted) %&gt;% View()

# This was the only grey jay ever seen in the Hamilton CBC... Maybe it was a mistake??
hamilton_cbc %&gt;% filter(species == &quot;Gray Jay&quot;, !is.na(how_many_counted))</code></pre>
<pre><code>## # A tibble: 94 x 6
##     year species species_latin how_many_counted total_hours
##    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                    &lt;dbl&gt;       &lt;dbl&gt;
##  1  1921 Gray J~ Perisoreus c~                1           8
##  2  1922 Gray J~ Perisoreus c~                0          NA
##  3  1924 Gray J~ Perisoreus c~                0          NA
##  4  1925 Gray J~ Perisoreus c~                0          NA
##  5  1926 Gray J~ Perisoreus c~                0          NA
##  6  1928 Gray J~ Perisoreus c~                0          NA
##  7  1930 Gray J~ Perisoreus c~                0          NA
##  8  1931 Gray J~ Perisoreus c~                0          NA
##  9  1932 Gray J~ Perisoreus c~                0          NA
## 10  1933 Gray J~ Perisoreus c~                0          NA
## # ... with 84 more rows, and 1 more variable:
## #   how_many_counted_by_hour &lt;dbl&gt;</code></pre>
<pre class="r"><code># 25 species were seen this year
hamilton_cbc %&gt;%
  filter(year == 1926,
         !is.na(how_many_counted)) %&gt;%
  select(species, how_many_counted) %&gt;% View()

random_sample_of_species &lt;- hamilton_cbc %&gt;%
  group_by(species) %&gt;%
  nest() %&gt;%
  sample_n(4) %&gt;%
  pull(species)

# hamilton_cbc %&gt;% 
#   filter(year &gt; 1980,
#          species %in% random_sample_of_species) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = species_count_per_hour, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted per hours&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   scale_y_log10() +
#   geom_miss_point()

# I prefer this one (numbers are more &quot;real&quot;, even though the y-axis is transformed, and naniar&#39;s plot works better on this one)
hamilton_cbc %&gt;% 
  filter(year &gt; 1980,
         species %in% random_sample_of_species) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis

## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 110 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-1.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;%
  ggplot(aes(x = year, y = total_hours)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number of hours&quot;) +
  theme_minimal() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-2.png" width="672" /></p>
<pre class="r"><code>invasive &lt;- c(&quot;European Starling&quot;, &quot;House Sparrow&quot;, &quot;Rock Pigeon (Feral Pigeon)&quot;, &quot;Ring-necked Pheasant&quot;)

hamilton_cbc %&gt;% 
  filter(species %in% invasive) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  geom_miss_point() +
  scale_y_log10()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 76 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-3.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         species == &quot;Eastern Bluebird&quot;) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-4.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Warbler&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-5.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Cat&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-6.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Wren&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-7.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Sparrow&quot;),
         !str_detect(species, &quot;House&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 484 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-8.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Duck&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 260 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-9.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         !str_detect(species, &quot;\\(&quot;),
         str_detect(species_latin, &quot;Larus&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 134 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-10.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species_latin, &quot;Aythya&quot;),
         !str_detect(species, &quot;\\(&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Transformation introduced infinite values in continuous y-axis</code></pre>
<pre><code>## Warning: Removed 166 rows containing non-finite values (stat_miss_point).</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-11.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Cormorant&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-12.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Eagle&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-13.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Junco&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-14.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Long-tailed Duck&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-15.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(str_detect(species, &quot;Cardinal&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-16.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(str_detect(species, &quot;Chickadee&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-17.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(year &gt; 1950,
         str_detect(species, &quot;Owl&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-18.png" width="672" /></p>
<pre class="r"><code>hamilton_cbc %&gt;% 
  filter(str_detect(species, &quot;Hawk&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-19.png" width="672" /></p>
<pre class="r"><code># Snow buntings had huge peaks in the 1970&#39;s
hamilton_cbc %&gt;% 
  filter(str_detect(species, &quot;Snow Bunting&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y =
               how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-20.png" width="672" /></p>
<pre class="r"><code># hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Meadowlark&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()

hamilton_cbc %&gt;% 
  filter(str_detect(species, &quot;Nuthatch&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y =
               how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab(&quot;Year&quot;) +
  ylab(&quot;Number counted&quot;) +
  labs(color = &quot;Species&quot;) +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()</code></pre>
<p><img src="/post/hamilton_cbc_part_2/index_files/figure-html/visualising-21.png" width="672" /></p>
<pre class="r"><code># hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Woodpecker&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Goose&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Swan&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Wood Duck&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Grouse&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() # +
#   #scale_y_log10() +
#   #geom_miss_point()
# 
# hamilton_cbc %&gt;% 
#   filter(str_detect(species, &quot;Harrier&quot;)) %&gt;% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab(&quot;Year&quot;) +
#   ylab(&quot;Number counted&quot;) +
#   labs(color = &quot;Species&quot;) +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()</code></pre>
<p>And thank you to the CBC! The CBC Data was provided by <a href="www.christmasbirdcount.org">National Audubon Society</a> and through the generous efforts of <a href="www.bsc-eoc.org">Bird Studies Canada</a> and countless volunteers across the western hemisphere.</p>
</div>
