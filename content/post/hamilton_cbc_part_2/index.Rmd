---
title: 'Hamilton Christmas Bird Count: Part 2'
subtitle: 'Visualising the Hamilton CBC data'
author: Sharleen
date: '2019-01-24'
slug: hamilton-christmas-bird-count-part-2
summary: Visualising the Hamilton CBC data.
categories: []
tags:
  - data analysis
  - R
  - natural history
  - ornithology
  - ecology
  - birding
  - ggplot2
  - tidyverse
draft: true
image:
  caption: 'Northern Cardinal image credit: [**Public Domain Files**](http://www.publicdomainfiles.com/show_file.php?id=13962429013391)'
  preview_only: false

---

# Note

This is the second part of three for this dataset. Part 1 contains data downloading and cleaning, Part 2 contains visualisations and Part 3 contains my Shiny app!

# Introduction

In Part 1 of this data analysis project gave us a 

# Data visualising

I started by loading all of the packages I will be using:

```{r setup, message = FALSE}

library(dplyr)
library(janitor)
library(readr)
library(naniar)
library(lubridate)
library(measurements)
library(stringr)
library(ggplot2)
library(here)
library(tidyr)

```

```{r read_the_data, include = FALSE, message = FALSE, warning = FALSE}

hamilton_cbc <- read_rds(here("content", "post", "hamilton_cbc_part_3", "hamilton_cbc_shiny", "hamilton_cbc_output.rds"))

```

# Data visualizing

The book

In 1955, the count boundaries changed.

```{r visualising}
# This person went out for 8 hours in 1921 and saw 9 different species, including a grey jay!
hamilton_cbc %>%
  filter(year == 1921,
         !is.na(how_many_counted)) %>%
  select(species, how_many_counted) %>% View()

# This was the only grey jay ever seen in the Hamilton CBC... Maybe it was a mistake??
hamilton_cbc %>% filter(species == "Gray Jay", !is.na(how_many_counted))

# 25 species were seen this year
hamilton_cbc %>%
  filter(year == 1926,
         !is.na(how_many_counted)) %>%
  select(species, how_many_counted) %>% View()

random_sample_of_species <- hamilton_cbc %>%
  group_by(species) %>%
  nest() %>%
  sample_n(4) %>%
  pull(species)

# hamilton_cbc %>% 
#   filter(year > 1980,
#          species %in% random_sample_of_species) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = species_count_per_hour, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted per hours") +
#   labs(color = "Species") +
#   theme_minimal() +
#   scale_y_log10() +
#   geom_miss_point()

# I prefer this one (numbers are more "real", even though the y-axis is transformed, and naniar's plot works better on this one)
hamilton_cbc %>% 
  filter(year > 1980,
         species %in% random_sample_of_species) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>%
  ggplot(aes(x = year, y = total_hours)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number of hours") +
  theme_minimal() +
  geom_miss_point()


invasive <- c("European Starling", "House Sparrow", "Rock Pigeon (Feral Pigeon)", "Ring-necked Pheasant")

hamilton_cbc %>% 
  filter(species %in% invasive) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  geom_miss_point() +
  scale_y_log10()

hamilton_cbc %>% 
  filter(year > 1950,
         species == "Eastern Bluebird") %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Warbler")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Cat")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()
  

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Wren")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  # scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Sparrow"),
         !str_detect(species, "House")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Duck")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         !str_detect(species, "\\("),
         str_detect(species_latin, "Larus")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species_latin, "Aythya"),
         !str_detect(species, "\\(")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  scale_y_log10() +
  geom_miss_point()


hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Cormorant")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Eagle")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()


hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Junco")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Long-tailed Duck")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(str_detect(species, "Cardinal")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(str_detect(species, "Chickadee")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(year > 1950,
         str_detect(species, "Owl")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

hamilton_cbc %>% 
  filter(str_detect(species, "Hawk")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y = how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

# Snow buntings had huge peaks in the 1970's
hamilton_cbc %>% 
  filter(str_detect(species, "Snow Bunting")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y =
               how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

# hamilton_cbc %>% 
#   filter(str_detect(species, "Meadowlark")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()

hamilton_cbc %>% 
  filter(str_detect(species, "Nuthatch")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
  ggplot(aes(x = year, y =
               how_many_counted, color = species)) +
  geom_line(size = 1) +
  xlab("Year") +
  ylab("Number counted") +
  labs(color = "Species") +
  theme_minimal() +
  #scale_y_log10() +
  geom_miss_point()

# hamilton_cbc %>% 
#   filter(str_detect(species, "Woodpecker")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %>% 
#   filter(str_detect(species, "Goose")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %>% 
#   filter(str_detect(species, "Swan")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %>% 
#   filter(str_detect(species, "Wood Duck")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y =
#                how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()
# 
# hamilton_cbc %>% 
#   filter(str_detect(species, "Grouse")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() # +
#   #scale_y_log10() +
#   #geom_miss_point()
# 
# hamilton_cbc %>% 
#   filter(str_detect(species, "Harrier")) %>% # https://jennybc.github.io/purrr-tutorial/ls12_different-sized-samples.html
#   ggplot(aes(x = year, y = how_many_counted, color = species)) +
#   geom_line(size = 1) +
#   xlab("Year") +
#   ylab("Number counted") +
#   labs(color = "Species") +
#   theme_minimal() +
#   #scale_y_log10() +
#   geom_miss_point()




```


And thank you to the CBC! The CBC Data was provided by [National Audubon Society](www.christmasbirdcount.org) and through the generous efforts of [Bird Studies Canada](www.bsc-eoc.org) and countless volunteers across the western hemisphere.
